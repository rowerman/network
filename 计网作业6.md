##### 6-02

域名系统DNS是互联网使用的命名系统，便于人们将标识主机的域名转换为IP地址，在域名系统中使用了层次结构的许多域名服务器

* 本地域名服务器：本地域名服务器离用户的主机较近，当一个主机发出DNS查询请求时，这个查询请求报文就发送给本地域名服务器。如果要查询的主机也属于同一个本地ISP，该本地域名服务器可以直接进行转换，然后将结果返回给主机；否则本地域名服务器要向根域名服务器发送查询请求
* 根域名服务器：根域名服务器是最高层次的域名服务器，所有的根域名服务器都知道所有的顶级域名服务器的域名和IP地址。当本地域名服务器无法解析某个域名时，其就要求助于根域名服务器
* 顶级域名服务器：负责管理在该顶级域名服务器注册的所有二级域名。当收到DNS查询请求时，给出相应的回答
* 权限域名服务器：负责一个区的域名解析。当一个权限域名服务器还是不能给出最后的查询回答时，就会告诉发送请求的用户下一步应该找哪一个权限域名服务器

##### 6-05

FTP使用客户服务器方式，一个FTP服务器进程可同时为多个客户进程提供服务。FTP的服务器进程由两大部分组成：一个主进程，负责接收新的请求；另外有若干个从属进程，负责处理单个请求

* 主进程的工作步骤如下：

  * 打开熟知端口（端口号21），等待客户进程的连接请求
  * 启动从属进程来处理客户进程发来的请求，从属进程对客户进程的请求处理完毕后即终止
  * 回到等待状态

* 从属进程分为两类：控制进程和数据传送进程。在进行文件传输时，FTP的客户和服务器之间要建立两个并行的TCP的连接：”控制连接“和”数据连接“。其中控制连接用来接收用户发来的传送请求，真正的文件传输由数据连接进行

  FTP使用的是一个分离的控制连接，一般传送数据都是在带内传送的，但FTP的控制信息不在数据传送中传送，而是在控制连接中传送。因此称FTP带外传送控制信息

##### 6-10

应用层协议需要用到**DNS**

运输层协议需要用到**UDP**(DNS)和**TCP**(HTTP)

##### 6-14

（1）这是错误的。对于非持续HTTP，需要使用4个TCP连接分别来发送这4个请求和响应。但对于持续HTTP，可以在一个TCP连接的基础上连续传送4个请求和响应

（2）这是正确的。显然这两个网页处于一个服务器上（域名相同），因此可以在一个持续HTTP连接上传送两个网页

（3）这是错误的。对于客户与服务器之间的非持续连接，每一个新的HTTP请求报文必须使用一个新的TCP连接

（4）这是错误的。有时服务器无法找到客户端所请求的文件，这时服务器返回的响应的主体实体部分就是空的

##### 6-16

建立TCP连接并读取HTML文件完成时所用的总时间为：$RTT_1+RTT_2+\dots+RTT_n+2RTT_w$

（1）读取3个小文件需要先后建立3次TCP连接，然后进行数据传送，所需时间为$2RTT_w*3=6RTT_w$，总时间为$RTT_1+RTT_2+\dots+RTT_n+8RTT_w$

（2）读取三个小文件需要同时建立3次TCP连接，然后进行数据传送，所需时间为$2RTT_w$，总时间为$RTT_1+RTT_2+\dots+RTT_n+4RTT_w$

（3）读取3个小文件可以使用之前的TCP连接，而且使用流水线方式使往返时间只需要一个$RTT_w$，总时间为$RTT_1+RTT_2+\dots+RTT_n+3RTT_w$

##### 6-51

（1）N=10，为了计算方便，假定$G=10^9$

* 客户-服务器：

$$
NF/u_s=150Gbit/(30Mbit/s)=5\times10^3s \\
F/d=15Gbit/(2Mbit/s)=7.5\times10^3s
$$

所以这种情况下文件分发的最短时间为$7.5\times10^3s$

* P2P：

$$
F/u_s=15Gbit/(30Mbit/s)=5\times10^2s \\
F/d=15Gbit/(2Mbit/s)=7.5\times10^3s \\
NF/u_T=150Gbit/(3Mbit/s)=5\times10^3s
$$

所以这种情况下文件分发的最短时间为$7.5\times10^3s$

（2）N=1000

* 客户-服务器：

$$
NF/u_s=15000Gbit/(30Mbit/s)=5\times10^5s \\
F/d=15Gbit/(2Mbit/s)=7.5\times10^3s
$$

所以这种情况下文件分发的最短时间为$5\times10^5s$

* P2P：

$$
F/u_s=15Gbit/(30Mbit/s)=5\times10^2s \\
F/d=15Gbit/(2Mbit/s)=7.5\times10^3s \\
NF/u_T=15000Gbit/(30Mbit/s)=5\times10^4s
$$

所以这种情况下文件分发的最短时间为$5\times10^4s$